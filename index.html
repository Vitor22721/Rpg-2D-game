<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ”¥ RPG Game 2D com Buffs, Bosses e Atributos ğŸ”¥</title>
  <style>
    body {
      background: #111;
      color: white;
      font-family: sans-serif;
      text-align: center;
    }

    canvas {
      background: #333;
      border: 4px solid #0f0;
      display: block;
      margin: 10px auto;
    }

    button {
      padding: 6px 12px;
      margin: 5px;
      font-weight: bold;
    }

    #hud, #acoes, #inventario, #loja, #status, #fim, #log {
      margin-top: 10px;
    }

    #fim {
      font-size: 24px;
      color: yellow;
      display: none;
    }
  </style>
</head>
<body>
  <h1>ğŸ”¥ RPG Game 2D com Buffs, Bosses e Atributos ğŸ”¥</h1>
  <canvas id="game" width="640" height="360"></canvas>

  <div id="hud">
    â¤ï¸ Vida: <span id="vida">100</span> |
    ğŸ”® Mana: <span id="mana">50</span> |
    ğŸ›¡ï¸ Defesa: <span id="defesa">5</span> |
    â­ NÃ­vel: <span id="nivel">1</span> |
    ğŸ“˜ XP: <span id="xp">0</span> |
    ğŸ’° Moedas: <span id="moedas">20</span> |
    ğŸ§  Pontos: <span id="pontos">0</span>
  </div>

  <div id="acoes">
    <button onclick="acao('atacar')">âš”ï¸ Atacar</button>
    <button onclick="acao('usarPocao')">ğŸ§ª Usar PoÃ§Ã£o</button>
    <button onclick="ativarBuff('espada')">ğŸ—¡ï¸ Buff Espada</button>
    <button onclick="ativarBuff('armadura')">ğŸ›¡ï¸ Buff Armadura</button>
    <button onclick="abrirLoja()">ğŸ›’ Loja</button>
    <button onclick="abrirStatus()">ğŸ“Š Atributos</button>
  </div>

  <div id="loja" style="display: none;">
    <h3>ğŸ›ï¸ Loja</h3>
    <button onclick="comprar('pocao')">ğŸ§ª PoÃ§Ã£o (5 ğŸ’°)</button>
    <button onclick="comprar('espada')">ğŸ—¡ï¸ Espada (15 ğŸ’°)</button>
    <button onclick="comprar('armadura')">ğŸ›¡ï¸ Armadura (15 ğŸ’°)</button>
    <button onclick="comprar('anel')">ğŸ’ Anel MÃ¡gico (20 ğŸ’°)</button>
    <button onclick="fecharLoja()">âŒ Fechar</button>
  </div>

  <div id="status" style="display: none;">
    <h3>ğŸ“Š Atributos</h3>
    Pontos disponÃ­veis: <span id="pontos">0</span><br>
    <button onclick="aumentar('dano')">ğŸ”¼ Dano (<span id="dano">15</span>)</button>
    <button onclick="aumentar('vidaMax')">ğŸ”¼ Vida MÃ¡x (<span id="vidaMax">100</span>)</button>
    <button onclick="aumentar('manaMax')">ğŸ”¼ Mana MÃ¡x (<span id="manaMax">50</span>)</button>
    <button onclick="aumentar('defesa')">ğŸ”¼ Defesa (<span id="defesaVal">5</span>)</button>
    <button onclick="aumentar('velocidade')">ğŸ”¼ Velocidade (<span id="velocidadeVal">1</span>)</button>
    <button onclick="aumentar('critico')">ğŸ”¼ CrÃ­tico (<span id="criticoVal">0%</span>)</button>
    <button onclick="fecharStatus()">âŒ Fechar</button>
  </div>

  <div id="log"></div>
  <div id="fim">ğŸ‰ ParabÃ©ns! VocÃª zerou o jogo ao atingir o nÃ­vel 100! ğŸ‰</div>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    const jogador = {
      vida: 100,
      vidaMax: 100,
      mana: 50,
      manaMax: 50,
      defesa: 5,
      dano: 15,
      nivel: 1,
      xp: 0,
      moedas: 20,
      pontos: 0,
      pocoes: 3,
      espada: false,
      armadura: false,
      buffEspada: 0,
      buffArmadura: 0,
      cooldownEspada: 0,
      cooldownArmadura: 0,
      velocidade: 1,
      critico: 0
    };

    let pontosPendentes = 0;
    let animarAtaque = 0;
    let inimigo = gerarInimigo();

    function gerarInimigo() {
      if (jogador.nivel % 10 === 0) {
        const bosses = ["Orc", "DragÃ£o", "Minotauro"];
        const tipo = bosses[Math.floor(Math.random() * bosses.length)];
        return { vida: 150 + jogador.nivel * 10, ataque: 25, tipo };
      } else {
        return { vida: 50 + jogador.nivel * 10, ataque: 10 + jogador.nivel * 2, tipo: "Goblin" };
      }
    }

    function desenhar() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Jogador
      ctx.fillStyle = "#0f0";
      ctx.beginPath();
      ctx.arc(120, 180, 25, 0, Math.PI * 2);
      ctx.fill();

      if (jogador.espada) {
        ctx.fillStyle = "silver";
        ctx.fillRect(145, 170, 15, 5);
      }

      if (jogador.armadura) {
        ctx.strokeStyle = "cyan";
        ctx.strokeRect(95, 155, 50, 50);
      }

      // Inimigo
      ctx.fillStyle = "red";
      ctx.fillRect(480, 150, 50, 50);
      ctx.fillStyle = "white";
      ctx.font = "16px sans-serif";
      ctx.fillText(`${inimigo.tipo} HP: ${inimigo.vida}`, 450, 140);

      if (animarAtaque > 0) {
        animarAtaque--;
        requestAnimationFrame(desenhar);
      }
    }

    function atualizarHUD() {
      document.getElementById("vida").textContent = jogador.vida;
      document.getElementById("mana").textContent = jogador.mana;
      document.getElementById("defesa").textContent = jogador.defesa;
      document.getElementById("nivel").textContent = jogador.nivel;
      document.getElementById("xp").textContent = jogador.xp;
      document.getElementById("moedas").textContent = jogador.moedas;
      document.getElementById("pontos").textContent = jogador.pontos;
      document.getElementById("dano").textContent = jogador.dano;
      document.getElementById("vidaMax").textContent = jogador.vidaMax;
      document.getElementById("manaMax").textContent = jogador.manaMax;
      document.getElementById("defesaVal").textContent = jogador.defesa;
      document.getElementById("velocidadeVal").textContent = jogador.velocidade;
      document.getElementById("criticoVal").textContent = jogador.critico + "%";
    }

    function log(msg) {
      document.getElementById("log").textContent = msg;
    }

    function acao(tipo) {
      if (tipo === "atacar") {
        let dano = jogador.dano;
        if (jogador.espada || jogador.buffEspada > 0) dano += 10;
        inimigo.vida -= dano;
        log(`VocÃª atacou o ${inimigo.tipo} causando ${dano} de dano!`);

        decrementarBuffs();
        decrementarCooldowns();

        if (inimigo.vida <= 0) {
          vitoria();
        } else {
          turnoInimigo();
        }

      } else if (tipo === "usarPocao") {
        if (jogador.pocoes > 0) {
          jogador.vida = Math.min(jogador.vida + 30, jogador.vidaMax);
          jogador.pocoes--;
          log("VocÃª usou uma poÃ§Ã£o!");
        } else {
          log("Sem poÃ§Ãµes!");
        }
        decrementarCooldowns();
      }

      atualizarHUD();
      desenhar();
    }

    function turnoInimigo() {
      let dano = inimigo.ataque - jogador.defesa;
      if (jogador.armadura || jogador.buffArmadura > 0) dano -= 5;
      dano = Math.max(0, dano);
      jogador.vida -= dano;
      log(`${inimigo.tipo} atacou e causou ${dano} de dano!`);

      if (jogador.vida <= 0) {
        alert("VocÃª foi derrotado!");
        location.reload();
      }
    }

    function vitoria() {
      log(`ğŸ‰ ${inimigo.tipo} derrotado!`);
      jogador.xp += 10;
      jogador.moedas += Math.floor(Math.random() * 16) + 5;

      if (jogador.xp >= 20) {
        jogador.nivel++;
        jogador.xp = 0;
        jogador.pontos += 3;
        jogador.vida = jogador.vidaMax;
        jogador.mana = jogador.manaMax;
        log(`ğŸ”º NÃ­vel ${jogador.nivel}!`);
        if (jogador.nivel === 100) {
          document.getElementById("fim").style.display = "block";
        }
      }

      inimigo = gerarInimigo();
    }

    function comprar(item) {
      if (item === "pocao" && jogador.moedas >= 5) {
        jogador.moedas -= 5;
        jogador.pocoes++;
      } else if (item === "espada" && jogador.moedas >= 15 && !jogador.espada) {
        jogador.moedas -= 15;
        jogador.espada = true;
      } else if (item === "armadura" && jogador.moedas >= 15 && !jogador.armadura) {
        jogador.moedas -= 15;
        jogador.armadura = true;
      } else if (item === "anel" && jogador.moedas >= 20) {
        jogador.moedas -= 20;
        jogador.mana += 10;
      } else {
        log("âŒ Compra invÃ¡lida ou moedas insuficientes.");
      }
      atualizarHUD();
    }

    function abrirLoja() {
      document.getElementById("loja").style.display = "block";
    }

    function fecharLoja() {
      document.getElementById("loja").style.display = "none";
    }

    function abrirStatus() {
      document.getElementById("status").style.display = "block";
    }

    function fecharStatus() {
      document.getElementById("status").style.display = "none";
    }

    function ativarBuff(tipo) {
      if (jogador.mana < 10) return log("Mana insuficiente!");

      if (tipo === "espada" && jogador.cooldownEspada === 0) {
        jogador.mana -= 10;
        jogador.buffEspada = 3;
        jogador.cooldownEspada = 5;
        log("Buff de espada ativado!");
      } else if (tipo === "armadura" && jogador.cooldownArmadura === 0) {
        jogador.mana -= 10;
        jogador.buffArmadura = 3;
        jogador.cooldownArmadura = 5;
        log("Buff de armadura ativado!");
      } else {
        log("Buff em cooldown!");
      }

      atualizarHUD();
    }

    function decrementarBuffs() {
      if (jogador.buffEspada > 0) jogador.buffEspada--;
      if (jogador.buffArmadura > 0) jogador.buffArmadura--;
    }

    function decrementarCooldowns() {
      if (jogador.cooldownEspada > 0) jogador.cooldownEspada--;
      if (jogador.cooldownArmadura > 0) jogador.cooldownArmadura--;
    }

    function aumentar(stat) {
      if (jogador.pontos <= 0) return;
      if (stat === "vidaMax") jogador.vidaMax += 10;
      else if (stat === "manaMax") jogador.manaMax += 10;
      else if (stat === "defesa") jogador.defesa++;
      else if (stat === "dano") jogador.dano += 2;
      else if (stat === "velocidade") jogador.velocidade++;
      else if (stat === "critico") jogador.critico += 5;
      jogador.pontos--;
      atualizarHUD();
    }

    desenhar();
    atualizarHUD();
  </script>
</body>
</html>
