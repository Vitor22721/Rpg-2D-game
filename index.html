<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ”¥ RPG Game ğŸ”¥</title>
  <style>
    body { background: #444; color: white; font-family: sans-serif; text-align: center; }
    canvas { background: #222; border: 2px solid #fff; display: block; margin: 10px auto; }
    button { padding: 6px 12px; margin: 5px; font-weight: bold; }
    #hud, #acoes, #inventario, #loja, #log, #status { margin-top: 10px; }
    #log div { font-size: 12px; margin: 2px; padding: 2px; background: #333; border-radius: 3px; }
  </style>
</head>
<body>
  <h1>ğŸ”¥ RPG Game ğŸ”¥</h1>
  <canvas id="game" width="640" height="360"></canvas>

  <div id="hud">
    â¤ï¸ Vida: <span id="vida">100%</span> |
    ğŸ”® Mana: <span id="mana">50</span> |
    ğŸ›¡ï¸ Defesa: <span id="defesa">5</span> |
    â­ NÃ­vel: <span id="nivel">1</span> |
    ğŸ“˜ XP: <span id="xp">0</span> |
    ğŸ’° Moedas: <span id="moedas">20</span>
  </div>

  <div id="inventario">
    ğŸ’ InventÃ¡rio:
    <span id="pocoes">3 poÃ§Ãµes</span> |
    <span id="espada">Espada: âŒ</span> |
    <span id="armadura">Armadura: âŒ</span> |
    <span id="itemUnico">Item Ãšnico: âŒ</span>
  </div>

  <div id="acoes">
    <button onclick="acao('atacar')">âš”ï¸ Atacar</button>
    <button onclick="acao('usarPocao')">ğŸ§ª Usar PoÃ§Ã£o</button>
    <button onclick="abrirLoja()">ğŸ›’ Loja</button>
  </div>

  <div id="loja" style="display:none;">
    <h3>ğŸ›ï¸ Loja</h3>
    <button onclick="comprar('pocao')">ğŸ§ª PoÃ§Ã£o (5 ğŸ’°)</button>
    <button onclick="comprar('espada')">ğŸ—¡ï¸ Espada (15 ğŸ’°)</button>
    <button onclick="comprar('armadura')">ğŸ›¡ï¸ Armadura (15 ğŸ’°)</button>
    <button onclick="fecharLoja()">âŒ Fechar</button>
  </div>

  <div id="log"></div>

  <script>
    // ğŸ§™â€â™‚ï¸ CRIAÃ‡ÃƒO DE PERSONAGEM
    function criarPersonagem() {
      let nome = prompt("Digite o nome do seu personagem:");
      while (!nome || nome.trim() === "") nome = prompt("Nome invÃ¡lido! Digite o nome do seu personagem:");

      let raca;
      while (true) {
        const r = prompt("Escolha sua raÃ§a:\n1. AnÃ£o\n2. Elfo\n3. Humano");
        if (r === "1") { raca = "AnÃ£o"; break; }
        if (r === "2") { raca = "Elfo"; break; }
        if (r === "3") { raca = "Humano"; break; }
        alert("OpÃ§Ã£o invÃ¡lida!");
      }

      let classe;
      while (true) {
        const c = prompt("Escolha sua classe:\n1. Guerreiro\n2. Mago\n3. Arqueiro");
        if (c === "1") { classe = "Guerreiro"; break; }
        if (c === "2") { classe = "Mago"; break; }
        if (c === "3") { classe = "Arqueiro"; break; }
        alert("OpÃ§Ã£o invÃ¡lida!");
      }

      let atributos = { forca: 5, magia: 5, agilidade: 5, vida: 50 };

      if (raca === "AnÃ£o") { atributos.forca += 2; atributos.vida += 10; }
      if (raca === "Elfo") { atributos.agilidade += 2; atributos.magia += 1; }

      if (classe === "Guerreiro") atributos.forca += 3;
      if (classe === "Mago") atributos.magia += 3;
      if (classe === "Arqueiro") atributos.agilidade += 3;

      alert(`--- Ficha ---\nNome: ${nome}\nRaÃ§a: ${raca}\nClasse: ${classe}\nForÃ§a: ${atributos.forca}\nMagia: ${atributos.magia}\nAgilidade: ${atributos.agilidade}\nVida Base: ${atributos.vida}`);

      return { nome, raca, classe, atributos };
    }

    const personagem = criarPersonagem();

    // ğŸ§¾ JOGADOR
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    const jogador = {
      ...personagem,
      vidaMax: 0,
      vida: 0,
      manaMax: 0,
      mana: 0,
      nivel: 1,
      xp: 0,
      moedas: 20,
      dano: 0,
      defesa: 0,
      pocoes: 3,
      espada: false,
      armadura: false,
      itemUnico: false
    };

    // Inicializar stats baseados nos atributos
    jogador.vidaMax = personagem.atributos.vida * 2;
    jogador.vida = jogador.vidaMax;
    jogador.manaMax = 20 + personagem.atributos.magia * 4;
    jogador.mana = jogador.manaMax;
    jogador.dano = Math.floor(personagem.atributos.forca * 2.5);
    jogador.defesa = Math.floor(personagem.atributos.forca / 2) + 2;

    let inimigo = gerarInimigo();
    let gameOver = false;

    // âš”ï¸ FUNÃ‡Ã•ES DO JOGO
    function gerarInimigo() {
      const nomesInimigos = ["Goblin", "Orc", "Esqueleto", "Lobo Selvagem", "Bandido"];
      const nome = nomesInimigos[Math.floor(Math.random() * nomesInimigos.length)];
      const vida = 40 + jogador.nivel * 12;
      const ataque = 7 + jogador.nivel * 2;
      return { nome, vida, ataque };
    }

    function log(texto) {
      const div = document.getElementById("log");
      const linha = document.createElement("div");
      linha.textContent = texto;
      div.prepend(linha);
      if (div.children.length > 12) {
        div.removeChild(div.lastChild);
      }
      div.scrollTop = 0;
    }

    function desenhar() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Jogador (cÃ­rculo verde)
      ctx.fillStyle = "#0f0";
      ctx.beginPath();
      ctx.arc(120, 180, 25, 0, Math.PI * 2);
      ctx.fill();

      // Nome e % vida do jogador
      ctx.fillStyle = "white";
      ctx.font = "14px sans-serif";
      ctx.fillText(jogador.nome.substring(0, 10), 90, 170);
      ctx.fillText(Math.round((jogador.vida / jogador.vidaMax) * 100) + "%", 95, 195);

      // Inimigo (retÃ¢ngulo vermelho)
      ctx.fillStyle = "red";
      ctx.fillRect(480, 150, 50, 50);

      // Nome e HP do inimigo
      ctx.fillStyle = "white";
      ctx.font = "16px sans-serif";
      ctx.fillText(`${inimigo.nome}`, 440, 140);
      ctx.fillText(`HP: ${Math.round(inimigo.vida)}`, 440, 165);

      requestAnimationFrame(desenhar);
    }

    function atualizarHUD() {
      document.getElementById("vida").textContent = Math.round((jogador.vida / jogador.vidaMax) * 100) + "%";
      document.getElementById("mana").textContent = jogador.mana;
      document.getElementById("defesa").textContent = jogador.defesa;
      document.getElementById("nivel").textContent = jogador.nivel;
      document.getElementById("xp").textContent = jogador.xp;
      document.getElementById("moedas").textContent = jogador.moedas;
      document.getElementById("pocoes").textContent = jogador.pocoes + " poÃ§Ãµes";
      document.getElementById("espada").textContent = "Espada: " + (jogador.espada ? "âœ…" : "âŒ");
      document.getElementById("armadura").textContent = "Armadura: " + (jogador.armadura ? "âœ…" : "âŒ");
      document.getElementById("itemUnico").textContent = "Item Ãšnico: " + (jogador.itemUnico ? "âœ…" : "âŒ");
    }

    function acao(tipo) {
      if (gameOver) return;

      if (tipo === "atacar") {
        const dano = jogador.dano + (jogador.espada ? 10 : 0);
        inimigo.vida -= dano;
        log(`âš”ï¸ ${jogador.nome} causou ${dano} de dano ao ${inimigo.nome}!`);
        atualizarHUD();
        if (inimigo.vida <= 0) {
          vitoria();
          return;
        }
      } else if (tipo === "usarPocao" && jogador.pocoes > 0) {
        const cura = Math.min(40, jogador.vidaMax - jogador.vida);
        jogador.vida = Math.min(jogador.vidaMax, jogador.vida + 40);
        jogador.pocoes--;
        log(`ğŸ§ª ${jogador.nome} usou uma poÃ§Ã£o! +${cura} vida`);
        atualizarHUD();
      } else {
        log("âŒ AÃ§Ã£o invÃ¡lida ou sem poÃ§Ãµes!");
        return;
      }

      // Turno do inimigo
      setTimeout(() => {
        ataqueInimigo();
      }, 800); // Pequeno delay para visual
    }

    function ataqueInimigo() {
      const danoInimigo = Math.max(1, inimigo.ataque - jogador.defesa);
      jogador.vida -= danoInimigo;
      log(`ğŸ‘¹ ${inimigo.nome} atacou ${jogador.nome}, causando ${danoInimigo} de dano!`);
      atualizarHUD();
      if (jogador.vida <= 0) {
        morte();
      }
    }

    function vitoria() {
      log(`ğŸ‰ ${inimigo.nome} derrotado!`);
      jogador.xp += 20 + Math.floor(Math.random() * 10);
      jogador.moedas += 5 + Math.floor(Math.random() * 6);
      log(`+${jogador.xp - (jogador.xp - (20 + Math.floor(Math.random() * 10)))} XP e ${jogador.moedas - (jogador.moedas - (5 + Math.floor(Math.random() * 6)))} moedas!`);
      atualizarHUD();

      const xpNec = 30 * jogador.nivel;
      if (jogador.xp >= xpNec) {
        jogador.nivel++;
        jogador.xp -= xpNec;
        jogador.vidaMax += 25;
        jogador.manaMax += 15;
        jogador.dano += 3;
        jogador.defesa += 1;
        jogador.vida = jogador.vidaMax;
        jogador.mana = jogador.manaMax;
        log(`â­ ${jogador.nome} subiu para o nÃ­vel ${jogador.nivel}! Stats melhorados!`);
        atualizarHUD();
      }

      inimigo = gerarInimigo();
    }

    function morte() {
      gameOver = true;
      log(`ğŸ’€ ${jogador.nome} foi derrotado! GAME OVER!`);
      log("ğŸ”„ Pressione F5 para recarregar e jogar novamente.");
      document.querySelectorAll("button").forEach(btn => btn.disabled = true);
    }

    function abrirLoja() {
      document.getElementById("loja").style.display = "block";
      document.getElementById("acoes").style.display = "none";
    }

    function fecharLoja() {
      document.getElementById("loja").style.display = "none";
      document.getElementById("acoes").style.display = "block";
    }

    function comprar(item) {
      if (item === "pocao") {
        if (jogador.moedas >= 5) {
          jogador.moedas -= 5;
          jogador.pocoes++;
          log("ğŸ§ª PoÃ§Ã£o comprada!");
        } else {
          log("ğŸ’¸ Moedas insuficientes!");
        }
      } else if (item === "espada" && !jogador.espada) {
        if (jogador.moedas >= 15) {
          jogador.moedas -= 15;
          jogador.espada = true;
          log("ğŸ—¡ï¸ Espada comprada! +10 dano!");
        } else {
          log("ğŸ’¸ Moedas insuficientes!");
        }
      } else if (item === "armadura" && !jogador.armadura) {
        if (jogador.moedas >= 15) {
          jogador.moedas -= 15;
          jogador.armadura = true;
          jogador.defesa += 10;
          log("ğŸ›¡ï¸ Armadura comprada! +10 defesa!");
        } else {
          log("ğŸ’¸ Moedas insuficientes!");
        }
      } else {
        log("âŒ Item indisponÃ­vel ou jÃ¡ possui!");
      }
      atualizarHUD();
    }

    // Iniciar jogo
    atualizarHUD();
    desenhar();
    log("ğŸ® Jogo iniciado! Escolha uma aÃ§Ã£o.");
  </script>
</body>
</html>
