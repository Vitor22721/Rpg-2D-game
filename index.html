<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Simples RPG 2d</title>
  <style>
    body { background: #111; color: white; font-family: sans-serif; text-align: center; }
    canvas { background: #222; border: 2px solid #fff; display: block; margin: 10px auto; }
    button { padding: 6px 12px; margin: 5px; font-weight: bold; }
    #hud, #acoes, #inventario, #loja, #log, #status { margin-top: 10px; }
  </style>
</head>
<body>
  <h1>ğŸ”¥ RPG Game 2D ğŸ”¥</h1>
  <canvas id="game" width="640" height="360"></canvas>

  <div id="hud">
    â¤ï¸ Vida: <span id="vida">100%</span> |
    ğŸ”® Mana: <span id="mana">50</span> |
    ğŸ›¡ï¸ Defesa: <span id="defesa">5</span> |
    â­ NÃ­vel: <span id="nivel">1</span> |
    ğŸ“˜ XP: <span id="xp">0</span> |
    ğŸ’° Moedas: <span id="moedas">20</span>
  </div>

  <div id="inventario">
    ğŸ’ InventÃ¡rio:
    <span id="pocoes">3 poÃ§Ãµes</span> |
    <span id="espada">Espada: âŒ</span> |
    <span id="armadura">Armadura: âŒ</span>
  </div>

  <div id="acoes">
    <button onclick="acao('atacar')">âš”ï¸ Atacar</button>
    <button onclick="acao('usarPocao')">ğŸ§ª Usar PoÃ§Ã£o</button>
    <button onclick="ativarBuff('espada')">ğŸ—¡ï¸ Buff Espada</button>
    <button onclick="ativarBuff('armadura')">ğŸ›¡ï¸ Buff Armadura</button>
    <button onclick="abrirLoja()">ğŸ›’ Loja</button>
    <button onclick="abrirStatus()">ğŸ“Š Atributos</button>
  </div>

  <div id="loja" style="display: none;">
    <h3>ğŸ›ï¸ Loja</h3>
    <button onclick="comprar('pocao')">ğŸ§ª PoÃ§Ã£o (5 ğŸ’°)</button>
    <button onclick="comprar('espada')">ğŸ—¡ï¸ Espada (15 ğŸ’°)</button>
    <button onclick="comprar('armadura')">ğŸ›¡ï¸ Armadura (15 ğŸ’°)</button>
    <button onclick="fecharLoja()">âŒ Fechar</button>
  </div>

  <div id="status" style="display: none;">
    <h3>ğŸ“Š Atributos</h3>
    Pontos disponÃ­veis: <span id="pontos">0</span><br>
    <button onclick="aumentar('dano')">ğŸ”¼ Dano (<span id="dano">15</span>)</button>
    <button onclick="aumentar('vidaMax')">ğŸ”¼ Vida MÃ¡x (<span id="vidaMax">100</span>)</button>
    <button onclick="aumentar('manaMax')">ğŸ”¼ Mana MÃ¡x (<span id="manaMax">50</span>)</button>
    <button onclick="aumentar('defesa')">ğŸ”¼ Defesa (<span id="defesaVal">5</span>)</button>
    <button onclick="aumentar('velocidade')">ğŸ”¼ Velocidade (<span id="velocidadeVal">1</span>)</button>
    <button onclick="aumentar('critico')">ğŸ”¼ CrÃ­tico (<span id="criticoVal">0%</span>)</button>
    <button onclick="fecharStatus()">âŒ Fechar</button>
  </div>

  <div id="log" style="margin-top: 10px;"></div>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    const jogador = {
      vida: 100, mana: 50, manaMax: 50, nivel: 1, xp: 0, moedas: 20,
      dano: 15, vidaMax: 100, defesa: 5, pocoes: 3, espada: false, armadura: false,
      buffEspada: 0, buffArmadura: 0, cooldownEspada: 0, cooldownArmadura: 0,
      pontos: 0, velocidade: 1, critico: 0
    };

    let inimigo = gerarInimigo();
    let animarAtaque = 0;

    function gerarInimigo() {
      if (jogador.nivel % 10 === 0) {
        const bosses = ["Orc", "DragÃ£o", "Minotauro"];
        const nome = bosses[Math.floor(Math.random() * bosses.length)];
        const vidaBase = 200 + jogador.nivel * 15;
        const ataque = 30 + jogador.nivel * 3;
        log(`âš ï¸ BOSS: ${nome} apareceu!`);
        return { vida: vidaBase, ataque };
      } else {
        const vidaBase = 50 + jogador.nivel * 10;
        const ataque = 10 + jogador.nivel * 2;
        return { vida: vidaBase, ataque };
      }
    }

    function desenhar() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "blue";
      ctx.fillRect(100 + (animarAtaque ? 10 : 0), 150, 50, 50);
      ctx.fillStyle = "red";
      ctx.fillRect(480, 150, 50, 50);
      ctx.fillStyle = "white";
      ctx.font = "16px sans-serif";
      ctx.fillText("Inimigo HP: " + inimigo.vida, 460, 140);
      if (animarAtaque) {
        animarAtaque--;
        requestAnimationFrame(desenhar);
      }
    }

    function atualizarHUD() {
      document.getElementById("vida").textContent = jogador.vida + "%";
      document.getElementById("mana").textContent = jogador.mana;
      document.getElementById("nivel").textContent = jogador.nivel;
      document.getElementById("xp").textContent = jogador.xp;
      document.getElementById("moedas").textContent = jogador.moedas;
      document.getElementById("pocoes").textContent = jogador.pocoes + " poÃ§Ãµes";
      document.getElementById("espada").textContent = "Espada: " + (jogador.espada ? "âœ…" : "âŒ");
      document.getElementById("armadura").textContent = "Armadura: " + (jogador.armadura ? "âœ…" : "âŒ");
      document.getElementById("pontos").textContent = jogador.pontos;
      document.getElementById("dano").textContent = jogador.dano;
      document.getElementById("vidaMax").textContent = jogador.vidaMax;
      document.getElementById("manaMax").textContent = jogador.manaMax;
      document.getElementById("defesa").textContent = jogador.defesa;
      document.getElementById("defesaVal").textContent = jogador.defesa;
      document.getElementById("velocidadeVal").textContent = jogador.velocidade;
      document.getElementById("criticoVal").textContent = jogador.critico + "%";
    }

    function aumentar(attr) {
      if (jogador.pontos > 0) {
        if (attr === 'vidaMax' || attr === 'manaMax') jogador[attr] += 10;
        else if (attr === 'defesa') jogador[attr] += 1;
        else if (attr === 'velocidade') jogador[attr] += 1;
        else if (attr === 'critico') jogador[attr] += 5;
        else jogador[attr] += 2;
        jogador.pontos--;
        atualizarHUD();
      }
    }

    // (restante do script permanece igual)

    desenhar();
    atualizarHUD();
  </script>
</body>
</html>
