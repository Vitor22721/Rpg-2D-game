<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ”¥ RPG Game ğŸ”¥</title>
  <style>
    body { background: #444; color: white; font-family: sans-serif; text-align: center; }
    canvas { background: #222; border: 2px solid #fff; display: block; margin: 10px auto; }
    button { padding: 6px 12px; margin: 5px; font-weight: bold; }
    #hud, #acoes, #inventario, #loja, #log, #status { margin-top: 10px; }
  </style>
</head>
<body>
  <h1>ğŸ”¥ RPG Game ğŸ”¥</h1>
  <canvas id="game" width="640" height="360"></canvas>

  <div id="hud">
    â¤ï¸ Vida: <span id="vida">100%</span> |
    ğŸ”® Mana: <span id="mana">50</span> |
    ğŸ›¡ï¸ Defesa: <span id="defesa">5</span> |
    â­ NÃ­vel: <span id="nivel">1</span> |
    ğŸ“˜ XP: <span id="xp">0</span> |
    ğŸ’° Moedas: <span id="moedas">20</span>
  </div>

  <div id="inventario">
    ğŸ’ InventÃ¡rio:
    <span id="pocoes">3 poÃ§Ãµes</span> |
    <span id="espada">Espada: âŒ</span> |
    <span id="armadura">Armadura: âŒ</span> |
    <span id="itemUnico">Item Ãšnico: âŒ</span>
  </div>

  <div id="acoes">
    <button onclick="acao('atacar')">âš”ï¸ Atacar</button>
    <button onclick="acao('usarPocao')">ğŸ§ª Usar PoÃ§Ã£o</button>
    <button onclick="abrirLoja()">ğŸ›’ Loja</button>
  </div>

  <div id="loja" style="display:none;">
    <h3>ğŸ›ï¸ Loja</h3>
    <button onclick="comprar('pocao')">ğŸ§ª PoÃ§Ã£o (5 ğŸ’°)</button>
    <button onclick="comprar('espada')">ğŸ—¡ï¸ Espada (15 ğŸ’°)</button>
    <button onclick="comprar('armadura')">ğŸ›¡ï¸ Armadura (15 ğŸ’°)</button>
    <button onclick="fecharLoja()">âŒ Fechar</button>
  </div>

  <div id="log" style="margin-top:10px;"></div>

  <script>
    // ğŸ§™â€â™‚ï¸ CRIAÃ‡ÃƒO DE PERSONAGEM
    function criarPersonagem() {
      let nome = prompt("Digite o nome do seu personagem:");
      while (!nome || nome.trim() === "") nome = prompt("Nome invÃ¡lido! Digite o nome do seu personagem:");

      let raca;
      while (true) {
        const r = prompt("Escolha sua raÃ§a:\n1. AnÃ£o\n2. Elfo\n3. Humano");
        if (r === "1") { raca = "AnÃ£o"; break; }
        if (r === "2") { raca = "Elfo"; break; }
        if (r === "3") { raca = "Humano"; break; }
        alert("OpÃ§Ã£o invÃ¡lida!");
      }

      let classe;
      while (true) {
        const c = prompt("Escolha sua classe:\n1. Guerreiro\n2. Mago\n3. Arqueiro");
        if (c === "1") { classe = "Guerreiro"; break; }
        if (c === "2") { classe = "Mago"; break; }
        if (c === "3") { classe = "Arqueiro"; break; }
        alert("OpÃ§Ã£o invÃ¡lida!");
      }

      let atributos = { forca: 5, magia: 5, agilidade: 5, vida: 50 };

      if (raca === "AnÃ£o") { atributos.forca += 2; atributos.vida += 10; }
      if (raca === "Elfo") { atributos.agilidade += 2; atributos.magia += 1; }

      if (classe === "Guerreiro") atributos.forca += 3;
      if (classe === "Mago") atributos.magia += 3;
      if (classe === "Arqueiro") atributos.agilidade += 3;

      alert(`--- Ficha ---\nNome: ${nome}\nRaÃ§a: ${raca}\nClasse: ${classe}\nForÃ§a: ${atributos.forca}\nMagia: ${atributos.magia}\nAgilidade: ${atributos.agilidade}\nVida: ${atributos.vida}`);

      return { nome, raca, classe, atributos };
    }

    const personagem = criarPersonagem();

    // ğŸ§¾ JOGADOR
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    const jogador = {
      ...personagem,
      vida: 100, mana: 50, manaMax: 50, nivel: 1, xp: 0, moedas: 20,
      dano: 15, vidaMax: 100, defesa: 5, pocoes: 3, espada: false, armadura: false,
    };

    let inimigo = gerarInimigo();

    // âš”ï¸ FUNÃ‡Ã•ES DO JOGO
    function gerarInimigo() {
      const vidaBase = 50 + jogador.nivel * 10;
      const ataque = 10 + jogador.nivel * 2;
      return { vida: vidaBase, ataque, nome: "Inimigo" };
    }

    function log(texto) {
      const div = document.getElementById("log");
      const linha = document.createElement("div");
      linha.textContent = texto;
      div.prepend(linha);
    }

    function desenhar() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Jogador
      ctx.fillStyle = "#0f0";
      ctx.beginPath();
      ctx.arc(120, 180, 25, 0, Math.PI * 2);
      ctx.fill();

      // Inimigo
      ctx.fillStyle = "red";
      ctx.fillRect(480, 150, 50, 50);

      ctx.fillStyle = "white";
      ctx.font = "16px sans-serif";
      ctx.fillText(`${inimigo.nome} HP: ${inimigo.vida}`, 440, 140);

      requestAnimationFrame(desenhar);
    }

    function atualizarHUD() {
      document.getElementById("vida").textContent = jogador.vida + "%";
      document.getElementById("mana").textContent = jogador.mana;
      document.getElementById("defesa").textContent = jogador.defesa;
      document.getElementById("nivel").textContent = jogador.nivel;
      document.getElementById("xp").textContent = jogador.xp;
      document.getElementById("moedas").textContent = jogador.moedas;
      document.getElementById("pocoes").textContent = jogador.pocoes + " poÃ§Ãµes";
      document.getElementById("espada").textContent = "Espada: " + (jogador.espada ? "âœ…" : "âŒ");
      document.getElementById("armadura").textContent = "Armadura: " + (jogador.armadura ? "âœ…" : "âŒ");
      document.getElementById("itemUnico").textContent = "Item Ãšnico: âŒ";
    }

    function acao(tipo) {
      if (tipo === "atacar") {
        const dano = jogador.dano + (jogador.espada ? 5 : 0);
        inimigo.vida -= dano;
        log(`ğŸ—¡ï¸ VocÃª causou ${dano} de dano!`);
        if (inimigo.vida <= 0) vitoria();
      } else if (tipo === "usarPocao" && jogador.pocoes > 0) {
        jogador.vida = Math.min(jogador.vida + 30, jogador.vidaMax);
        jogador.pocoes--;
        log("ğŸ§ª VocÃª usou uma poÃ§Ã£o!");
      } else {
        log("âŒ AÃ§Ã£o invÃ¡lida!");
      }
      atualizarHUD();
    }

    function vitoria() {
      log("ğŸ‰ Inimigo derrotado!");
      jogador.xp += 10;
      jogador.moedas += 5;
      if (jogador.xp >= 20) {
        jogador.nivel++;
        jogador.xp = 0;
        jogador.vida = jogador.vidaMax;
        log("ğŸ”º Subiu para o nÃ­vel " + jogador.nivel + "!");
      }
      inimigo = gerarInimigo();
    }

    atualizarHUD();
    desenhar();
  </script>
</body>
</html>
